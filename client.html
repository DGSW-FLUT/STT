<html>
    <head>
        <meta charset="UTF-8"/>
    </head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <script>
        const socket = io.connect('localhost:3000');
        var page = null;
        var page_document = null;
        var page_data = null;
        var page_onload = (data) => {};
        const pageList = [
            'charmWordPage.html',
            'index.html',
            'newsPage.html',
            'recordingPage.html',
            'youtubeDataPage.html',
            'youtubeVideoPage.html',
        ];
        window.addEventListener("load", () => {
            page = document.getElementById('page');
            page.addEventListener("load", () => {
                page_document = page.contentWindow.document;
                console.log(page_onload);
                if (page_onload) page_onload(page_data);
                else console.log(':::page onload is null');
            }, false);
            console.log(page);

            socket.on('page news', function (data) {
                page_data = data;
                page_onload = function (data) {
                    page_document.getElementById('subText').innerText = data.title;
                    page_document.getElementById('outputBox').innerHTML = '';
                    
                    data.headlines.forEach((e, i) =>
                    {
                        if (i < 5 )
                        {
                            let node = document.createElement("div");
                            node.setAttribute('class', 'output');
                            node.innerText = e;
                            page_document.getElementById('outputBox').appendChild(node);
                        }
                    });
                };
                page.setAttribute('src', '/views/newsPage.html');
            });
        }, false);
    </script>
    <body style="margin: 0 0 0 0;width: 1920px; height: 1080px;overflow:hidden;">
        <iframe id="page" style="width: 1920px; height: 1080px;" src="/views/index.html">

        </iframe>
    </body>
</html>